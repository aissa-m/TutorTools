(()=>{const e="../../backEnd/php/",n=localStorage.getItem("alumnoId");document.addEventListener("DOMContentLoaded",(()=>{n&&fetch(e+`detallesAlumno.php?id=${n}`).then((e=>e.json())).then((e=>{!function(e){const n=document.getElementById("detalles-alumnos"),t=`\n        <div class="card-body">\n            <b><p>${e.nombre}</p></b>\n            <p>${e.email}</p>\n            <p>${e.telefono}</p>  \n            <p>${e.descripcion}</p>     \n            <p>Fecha de Inscripción: ${e.created_at}</p>     \n            \n            <button class="btn btn-secondary editar" id="editar" data-id="${e.id}" data-tipo="alumno">Editar</button>                                \n            <button class="btn btn-danger eliminar" data-id="${e.id}" data-tipo="alumno">Eliminar</button>         \n        <div>\n    `;n.insertAdjacentHTML("beforeend",t)}(e)})).catch((e=>console.error("Error:",e))),document.addEventListener("click",(function(n){if(n.target&&n.target.classList.contains("editar")){!function(n){var t=new bootstrap.Modal(document.getElementById("editarAlumnoModal"),{keyboard:!1});fetch(e+`detallesAlumno.php?id=${n}`).then((e=>e.json())).then((e=>{document.getElementById("nombreAlumno").value=e.nombre,document.getElementById("emailAlumno").value=e.email,document.getElementById("telefonoAlumno").value=e.telefono,document.getElementById("descripcionAlumno").value=e.descripcion,document.getElementById("idAlumno").value=e.id,t.show()})).catch((e=>console.error("Error:",e)))}(n.target.dataset.id)}})),""!=n&&null!=n&&fetch(e+`deuda.php?id=${n}`).then((e=>e.json())).then((e=>{if(null!==e.deuda){const n=document.getElementById("deudas"),t=`\n                    <div class="card deudas">\n                        <div class="card-body">\n                            <h5>Pendiente: ${e.deuda}€</h5>\n                        </div>\n                    </div>\n                    \n                `;n.insertAdjacentHTML("beforeend",t)}})).catch((e=>{console.error("Error del servidor: "+e)})),""!=n&&null!=n&&fetch(e+`total_pagado.php?id=${n}`).then((e=>e.json())).then((e=>{if(null!==e.total_pagado){const n=document.getElementById("deudas"),t=`\n                    <div class="card deudas">\n                        <div class="card-body">\n                            <h5>Total Pagado: ${e.total_pagado}€</h5>\n                        </div>\n                    </div>\n                    \n                `;n.insertAdjacentHTML("beforeend",t)}})).catch((e=>{console.error("Error del servidor: "+e)}))})),document.addEventListener("DOMContentLoaded",(function(){var n=new bootstrap.Modal(document.getElementById("editarAlumnoModal"),{keyboard:!1});document.getElementById("formEditarAlumno").addEventListener("submit",(function(t){t.preventDefault();var d=new FormData(this);fetch(e+"actualizarAlumno.php",{method:"POST",body:d}).then((e=>e.json())).then((e=>{alert("Datos Modificados con éxito!"),n.hide(),document.querySelector("#editarAlumnoModal").remove(),location.reload()})).catch((e=>console.error("Error:",e)))}))}))})();